/*
 * @LastEditors: 尉旭胜(Riansin)
 * @Author: 尉旭胜(Riansin)
 */
import React, { useEffect, useState,useRef } from 'react';
import axios from 'axios';
import TextChunk from './text-chunk';
import Tag from '../tag/tag';
import './music-chunk.css'
import { Context } from '../..';
import { observer } from 'mobx-react-lite';
import list_data from '../nav/api';
import { Link } from 'react-router-dom';


const music_tag = [
  {
    id: 1,
    name: '周杰伦',
    color: 'yellow'
  },
  {
    id: 2,
    name: '七里香',
    color: 'green'
  },
  {
    id: 3,
    name: '仙剑奇侠传',
    color: 'yellow'
  },
  {
    id: 4,
    name: '米兰的小铁匠',
    color: 'green'
  },
  {
    id: 5,
    name: '乱舞春秋',
    color: 'blue'
  },
  {
    id: 6,
    name: '印第安老斑鸠',
    color: 'purple'
  },
  {
    id: 7,
    name: '任然',
    color: 'pink'
  },
  {
    id: 8,
    name: '以父之名',
    color: 'red'
  },
  {
    id: 9,
    name: '花海',
    color: 'brown'
  },
  {
    id: 10,
    name: '依然范特西',
    color: 'yellow'
  },
  {
    id: 11,
    name: '一路向北',
    color: 'blue'
  },
  {
    id: 12,
    name: '11月的萧邦',
    color: 'green'
  },
]
function MusicListItem(props) {
  const context = React.useContext(Context);
  const data = props.data ? props.data : [];
  return <>
    <a className='music-list-thead-detial'>
            <li>
              <TextChunk alpha={.9}>
              <svg t="1647442124461" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="56930" width="200" height="200"><path d="M818.655 971.545h-613.312c-84.303 0-152.886-66.343-152.886-147.89v-623.306c0-81.549 68.585-147.89 152.886-147.89h613.312c84.303 0 152.886 66.342 152.886 147.89v623.306c0 81.548-68.585 147.89-152.886 147.89zM205.345 123.155c-45.318 0-82.19 34.628-82.19 77.191v623.306c0 42.564 36.869 77.191 82.19 77.191h613.312c45.318 0 82.19-34.627 82.19-77.191v-623.306c0-42.563-36.869-77.191-82.19-77.191h-613.312z" fill="#e6e6e6" p-id="56931"></path></svg>
              </TextChunk>
            </li>
          
            <li>
              {data.songName}
            </li>

            <li>
              {data.artist}
            </li>
            {context.music_unfold ? <><li>
              {data.albumName}
            </li>
            <li>
              <TextChunk Class='music-list-control-com' alpha={.9} title='播放/暂停'>
              <svg t="1647442732953" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1357" width="200" height="200"><path d="M772.7 217.7a32.2 32.1 0 1 0 64.4 0 32.2 32.1 0 1 0-64.4 0Z" fill="#e6e6e6" p-id="1358"></path><path d="M415.8 679.9c5.9 0 11.5-1.6 16.2-4.5l231.1-134.6c10.9-5.2 18.5-16.3 18.5-29.2 0-11.9-6.4-22.3-16-27.8L439.7 352.2c-5.8-6.7-14.4-10.9-23.9-10.9-17.6 0-31.8 14.4-31.8 32.1 0 0.6 0 1.2 0.1 1.8l-0.4 0.2 0.5 269c-0.1 1.1-0.2 2.2-0.2 3.4 0 17.7 14.3 32.1 31.8 32.1z" fill="#e6e6e6" p-id="1359"></path><path d="M909.8 306.6c-5.4-10.5-16.3-17.8-28.9-17.8-17.8 0-32.2 14.4-32.2 32.1 0 6 1.7 11.7 4.6 16.5l-0.1 0.1c26.9 52.4 42.1 111.8 42.1 174.7 0 211.6-171.6 383.2-383.2 383.2S128.8 723.8 128.8 512.2 300.4 129.1 512 129.1c62.5 0 121.5 15 173.6 41.5l0.2-0.4c4.6 2.6 10 4.1 15.7 4.1 17.8 0 32.2-14.4 32.2-32.1 0-13.1-7.9-24.4-19.3-29.4C653.6 81.9 584.9 64.5 512 64.5 264.7 64.5 64.3 265 64.3 512.2S264.7 959.9 512 959.9s447.7-200.4 447.7-447.7c0-74.1-18-144-49.9-205.6z" fill="#e6e6e6" p-id="1360"></path></svg>
          </TextChunk>
          <TextChunk Class='music-list-control-com' alpha={.9} title='添加到播放列表'>
          <svg t="1647499523490" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2222" width="200" height="200"><path d="M511.5 957.9C264.9 957.9 65 758.2 65 511.9s199.9-446 446.5-446S958 265.6 958 511.9c0.1 246.3-199.8 446-446.5 446zM509 149.1c-200.4 0-355.8 162.2-355.8 362.3 0 200.1 155.4 356.8 355.8 356.8s362.9-156.7 362.9-356.8c0-200.1-162.5-362.3-362.9-362.3zM690.5 556h-134v133.8c0 24.6-20 44.6-44.6 44.6h-0.1c-24.6 0-44.6-19.9-44.6-44.6V556h-134c-24.7 0-44.6-19.9-44.6-44.5v-0.1c0-24.6 20-44.6 44.6-44.6h134V333c0-24.6 20-44.6 44.6-44.6h0.1c24.7 0 44.6 19.9 44.6 44.6v133.8h134c24.7 0 44.6 19.9 44.6 44.6v0.1c0 24.6-19.9 44.5-44.6 44.5z m0 0" p-id="2223" fill="#dbdbdb"></path></svg>
          </TextChunk>
          <TextChunk Class='music-list-control-com' alpha={.9} title='下载'>
          <svg t="1647499587115" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3807" width="200" height="200"><path d="M925.6 337.9c-22.6-53.3-54.8-101.2-96-142.3-41.1-41.1-89-73.4-142.3-96C632.1 76.2 573.5 64.4 513 64.4S393.9 76.2 338.7 99.6c-53.3 22.6-101.2 54.8-142.3 96-41.1 41.1-73.4 89-96 142.3C77 393.1 65.2 451.8 65.2 512.2c0 60.4 11.8 119.1 35.2 174.3 22.6 53.3 54.8 101.2 96 142.3 41.1 41.1 89 73.4 142.3 96C393.9 948.2 452.6 960 513 960s119.1-11.8 174.3-35.2c53.3-22.6 101.2-54.8 142.3-96 41.1-41.1 73.4-89 96-142.3 23.4-55.2 35.2-113.9 35.2-174.3 0-60.4-11.8-119.1-35.2-174.3zM513 879.1c-202.3 0-366.9-164.6-366.9-366.9S310.7 145.3 513 145.3c202.3 0 366.9 164.6 366.9 366.9S715.4 879.1 513 879.1z" p-id="3808" fill="#dbdbdb"></path><path d="M664.7 520.8c-17.6-15.6-44.7-13.9-60.3 3.7l-49.2 55.7V368.5c0-1.3-0.1-2.7-0.2-4 0.1-1.4 0.2-2.9 0.2-4.4v-30.3c0-23.2-19-42.2-42.2-42.2-23.2 0-42.2 19-42.2 42.2v30.3c0 1.6 0.1 3.1 0.3 4.7-0.1 1.2-0.2 2.4-0.2 3.7v211.6l-49.2-55.6c-15.6-17.6-42.7-19.3-60.3-3.7-17.6 15.6-19.3 42.7-3.7 60.3L481 720.5c4.1 4.7 9 8.2 14.4 10.6 0.1 0 0.2 0.1 0.3 0.1l1.5 0.6c0.2 0.1 0.4 0.2 0.6 0.2 0.4 0.2 0.8 0.3 1.2 0.4 0.3 0.1 0.6 0.2 0.8 0.3 0.3 0.1 0.7 0.2 1 0.3s0.7 0.2 1 0.3 0.6 0.2 0.9 0.2c0.4 0.1 0.8 0.2 1.1 0.3 0.3 0.1 0.6 0.1 0.8 0.2 0.4 0.1 0.8 0.2 1.2 0.2 0.3 0 0.5 0.1 0.8 0.1 0.4 0.1 0.8 0.1 1.2 0.2 0.3 0 0.6 0.1 0.8 0.1 0.4 0 0.8 0.1 1.2 0.1 0.3 0 0.6 0 0.9 0.1h4.2c0.3 0 0.6 0 0.9-0.1 0.4 0 0.8-0.1 1.2-0.1 0.3 0 0.6-0.1 0.8-0.1 0.4 0 0.8-0.1 1.2-0.2 0.3 0 0.5-0.1 0.8-0.1 0.4-0.1 0.8-0.1 1.2-0.2 0.3-0.1 0.6-0.1 0.8-0.2 0.4-0.1 0.8-0.2 1.1-0.3s0.6-0.1 0.9-0.2c0.3-0.1 0.7-0.2 1-0.3s0.7-0.2 1-0.3 0.6-0.2 0.8-0.3c0.4-0.1 0.8-0.3 1.2-0.4 0.2-0.1 0.4-0.2 0.6-0.2l1.5-0.6c0.1 0 0.2-0.1 0.3-0.1 5.3-2.4 10.3-5.9 14.4-10.6L668 581.1c16-17.6 14.3-44.8-3.3-60.3z" p-id="3809" fill="#dbdbdb"></path></svg>
              </TextChunk>
            </li>
            </> : <></>}
        </a>
  </>
}



function MusicList() {
  const context = React.useContext(Context);
  React.useEffect(() => {
    context.set_search_data_list(list_data);
    context.set_music_list()
  },[])
  return <>
    <div className='music-list'>
      <ul className='music-list-thead-first'>
        <li>
        <TextChunk alpha={0.9} Class='music-list-font-color music-list-search-list-box' svgwidth={18} title='添加到播放列表'>
            <svg t="1647439329902" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="55804" width="200" height="200"><path d="M842 62H182c-66 0-120 54-120 120v660c0 66 54 120 120 120h660c66 0 120-54 120-120V182c0-66-54-120-120-120z m30 750c0 33-27 60-60 60H212c-33 0-60-27-60-60V212c0-33 27-60 60-60h600c33 0 60 27 60 60v600z" fill="#e6e6e6" p-id="55805"></path><path d="M737 467H557V287c0-24.8-20.2-45-45-45s-45 20.2-45 45v180H287c-24.8 0-45 20.2-45 45s20.2 45 45 45h180v180c0 24.8 20.2 45 45 45s45-20.2 45-45V557h180c24.8 0 45-20.2 45-45s-20.2-45-45-45z" fill="#e6e6e6" p-id="55806"></path></svg>
            {context.music_unfold ? '添加到' : ''}
        </TextChunk>
        </li>
        <div>
        <li>
              <TextChunk alpha={0.9} Class='music-list-font-color music-list-search-list-box' svgwidth={24} content='搜索列表'>
              <svg t="1647313946609" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1186" width="200" height="200"><path d="M736 352a32 32 0 0 1 31.264 25.088c4.384 18.816 9.792 32.256 15.232 39.712l2.336 3.008c0.8 0.896 1.088 1.024 1.28 1.024 46.624 0 65.76 39.68 65.088 101.024a32 32 0 0 1-64-0.704c0.192-16.32-1.344-28.16-3.776-34.944l-0.608-1.504-1.92-0.032a65.088 65.088 0 0 1-12.896-2.24V736c0 57.824-66.816 96-144 96S480 793.824 480 736s66.816-96 144-96c29.184 0 56.864 5.44 80.032 15.36L704 384.704c0-1.408 0.032-2.816 0.192-4.224L704 384a32 32 0 0 1 32-32zM416 704a32 32 0 0 1 0 64H224a32 32 0 0 1 0-64h192z m208 0c-46.528 0-80 19.136-80 32s33.472 32 80 32 80-19.136 80-32-33.472-32-80-32zM544 448a32 32 0 0 1 0 64H224a32 32 0 0 1 0-64h320z m256-256a32 32 0 0 1 0 64H224a32 32 0 1 1 0-64h576z" p-id="1187" fill="#e6e6e6"></path></svg>
              </TextChunk>
            </li>
            <li>
              <TextChunk alpha={0.9} Class='music-list-font-color' content='播放列表' svgwidth={24}>
              <svg t="1647313903483" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="980" width="200" height="200"><path d="M608.352 442.176a64 64 0 0 1 33.92 9.728l163.648 102.272a64 64 0 0 1 0 108.544l-163.648 102.272a64 64 0 0 1-97.92-54.272v-204.544a64 64 0 0 1 64-64zM448 704a32 32 0 0 1 0 64H224a32 32 0 0 1 0-64h224z m160.352-197.824v204.544l163.648-102.272-163.648-102.272zM448 448a32 32 0 0 1 0 64H224a32 32 0 0 1 0-64h224z m352-256a32 32 0 0 1 0 64H224a32 32 0 1 1 0-64h576z" p-id="981" fill="#dbdbdb"></path></svg>
              </TextChunk>
            </li>
        </div>
          </ul> 
        <div className='music-list-thead'>  
          <ul className='music-list-thead-detial'>
            <li>
              <TextChunk>
              <svg t="1647062973284" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3143" width="200" height="200"><path d="M818.655 971.545h-613.312c-84.303 0-152.886-66.343-152.886-147.89v-623.306c0-81.549 68.585-147.89 152.886-147.89h613.312c84.303 0 152.886 66.342 152.886 147.89v623.306c0 81.548-68.585 147.89-152.886 147.89zM205.345 123.155c-45.318 0-82.19 34.628-82.19 77.191v623.306c0 42.564 36.869 77.191 82.19 77.191h613.312c45.318 0 82.19-34.627 82.19-77.191v-623.306c0-42.563-36.869-77.191-82.19-77.191h-613.312z" fill="#515151" p-id="3144"></path></svg>
              </TextChunk>
            </li>
          
            <li>
              歌曲
            </li>

            <li>
              歌手
            </li>
            {context.music_unfold ? <>
              <li>专辑</li>
              <li>操作</li>
            </>
              
              :
              <></>
            }
          </ul>
          
        </div>
        <div className='music-list-tbody'>
        {context.music.list_data.map((item,index) => <MusicListItem index={index} cid={item.copyrightId} data={item}></MusicListItem>)}
        </div>
      </div>
  </>
}

function MusicSearch() {
  return <>
    
  </>
}
//播放器控件
export const MusicControl = {
  //控件展开类名
  musicControlUnfoldClass: {
    music: 'music-box-unfold',
    music_palyer: 'music-palyer-box-unfold',
    play_box_state: 'play-state-box-unfold',
    play_box_progress_bar: "play-progress-box-unfold",
    music_list_table:'music-list-table-unfold',
  },
  //控件收缩类名
  musicControlShrinkClass: {
    music: 'music-box-shrink',
    music_palyer: 'music-palyer-box-shrink',
    play_box_state: 'play-state-box-shrink',
    play_box_progress_bar: "play-progress-box-shrink",
    music_list_table:'music-list-table-shrink',
  },
  //播放状态组件
  PlayState: (props) => {
    const context = React.useContext(Context);
    const onPlay = () => {
      context.change_nav_music_paly(context.Player)
    }
    return <>
      <div className={"music-transition " + context.music_control_class.play_box_state}>
        <TextChunk title='上一曲' isPreventDefault={true} fontSize={42} svgwidth={40}>
        <svg t="1647266174521" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7853" width="200" height="200"><path d="M496.452397 918.259724c-246.310825 0-446.716134-200.392006-446.716134-446.702831 0-246.323105 200.405309-446.716134 446.716134-446.716134 246.309802 0 446.701808 200.39303 446.701808 446.716134C943.154205 717.867718 742.762199 918.259724 496.452397 918.259724zM496.452397 79.850629c-215.985146 0-391.706263 175.721117-391.706263 391.706263 0 215.985146 175.721117 391.691937 391.706263 391.691937 215.984123 0 391.691937-175.706791 391.691937-391.691937C888.144334 255.57277 712.43652 79.850629 496.452397 79.850629z" p-id="7854" fill="#e6e6e6"></path><path d="M828.555168 485.310128c-7.587815 0-13.752212-6.151094-13.752212-13.752212 0-143.125745-96.30744-269.409916-234.195903-307.108516-7.318686-2.001587-11.644201-9.562796-9.643638-16.894785 2.001587-7.319709 9.562796-11.590989 16.895809-9.642614 149.814074 40.961924 254.448156 178.151469 254.448156 333.646939C842.306356 479.159034 836.156286 485.310128 828.555168 485.310128z" p-id="7855" fill="#e6e6e6"></path><path d="M514.998799 153.703661c-0.25378 0-0.509606 0-0.765433-0.026606-5.895267-0.322341-11.818163-0.483001-17.780969-0.483001-7.587815 0-13.752212-6.151094-13.752212-13.752212s6.164397-13.752212 13.752212-13.752212c6.460132 0 12.893658 0.188288 19.286252 0.537236 7.587815 0.403183 13.403265 6.889921 12.986779 14.477736C528.321222 148.023288 522.25097 153.703661 514.998799 153.703661z" p-id="7856" fill="#e6e6e6"></path><path d="M422.774351 597.062328 422.774351 597.062328c-7.333012 0-14.854313-2.109034-21.757536-6.083555l-145.516188-89.633437c-11.818163-6.809079-18.802228-17.445324-18.802228-28.995381-0.013303-12.033058 7.453762-23.260773 20.481474-30.795377l142.750191-89.162716c7.306406-4.230348 19.675108-6.339382 27.102265-6.339382 20.561291 0 40.277332 15.162328 40.277332 36.07359l0 178.850387c0 10.313903-8.43409 19.635199-15.069207 26.216081C445.846836 593.557504 432.281889 597.062328 422.774351 597.062328zM427.031305 373.556904c-2.605338 0-7.823176 0.831948-10.549264 2.403746l-143.93825 89.162716c-5.318122 3.089361-7.755638 6.01704-7.742335 7.198959 0 0.927115 1.121544 3.115967 5.083785 5.398964l145.355529 89.633437c2.390443 1.369184 5.089925 2.202155 7.601118 2.202155l0 0c1.557472 0 8.494465-0.322341 10.039657-1.866511 1.786693-1.772366 6.92369-4.63353 6.92369-6.714935L439.805236 382.125047C439.803189 375.033535 430.670182 373.556904 427.031305 373.556904z" p-id="7857" fill="#e6e6e6"></path><path d="M632.205221 597.062328 632.205221 597.062328c-6.903224 0-13.954827-2.054799-20.952194-6.083555L469.537398 501.251192c-12.019755-6.916527-19.191084-17.795295-19.205411-29.546943-0.013303-11.845793 7.252171-22.832008 19.903306-30.150694l145.208173-89.122807c27.786857-16.089443 58.152445 0.618077 58.152445 29.694299l0 178.850387c0 10.072403-7.65433 18.828834-13.080923 25.288966C654.686235 593.22186 641.538797 597.062328 632.205221 597.062328zM636.918569 373.556904c-1.14201 0-6.01704 0.309038-9.642614 2.403746l-141.595902 89.122807c-4.995781 2.901073-7.246031 5.493108-7.246031 6.607488 0 1.047866 1.282203 3.518127 5.634324 6.030343l141.553946 89.727581c3.143597 1.785669 5.520737 2.109034 6.64842 2.109034 0 0-0.013303 0 0 0 1.50426 0 6.795776-0.497327 7.197936-0.954745 1.155313-1.38351 6.621814-4.243651 6.621814-7.627724L646.090463 382.125047C646.091486 378.217041 640.545166 373.556904 636.918569 373.556904z" p-id="7858" fill="#e6e6e6"></path></svg>
        </TextChunk>
        <TextChunk title="播放/暂停" onClick={onPlay} isPreventDefault={true} fontSize={42} svgwidth={40}>
          {context.music_paly ? <svg t="1647266080135" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1243" width="200" height="200"><path d="M279.272727 384v256c0 53.527273 41.890909 95.418182 95.418182 95.418182s95.418182-41.890909 95.418182-95.418182v-256c0-53.527273-41.890909-95.418182-95.418182-95.418182S279.272727 330.472727 279.272727 384z m144.290909 0v256c0 27.927273-20.945455 48.872727-48.872727 48.872727s-48.872727-20.945455-48.872727-48.872727v-256c0-27.927273 20.945455-48.872727 48.872727-48.872727s48.872727 20.945455 48.872727 48.872727zM553.890909 384v256c0 53.527273 41.890909 95.418182 95.418182 95.418182s95.418182-41.890909 95.418182-95.418182v-256c0-53.527273-41.890909-95.418182-95.418182-95.418182s-95.418182 41.890909-95.418182 95.418182z m144.290909 0v256c0 27.927273-20.945455 48.872727-48.872727 48.872727s-48.872727-20.945455-48.872727-48.872727v-256c0-27.927273 20.945455-48.872727 48.872727-48.872727s48.872727 20.945455 48.872727 48.872727z" fill="#e6e6e6" p-id="1244"></path><path d="M923.927273 209.454545c-6.981818-9.309091-23.272727-11.636364-32.581818-4.654545-9.309091 6.981818-11.636364 23.272727-4.654546 32.581818C947.2 316.509091 977.454545 411.927273 977.454545 512c0 256-209.454545 465.454545-465.454545 465.454545S46.545455 768 46.545455 512 256 46.545455 512 46.545455c100.072727 0 195.490909 30.254545 274.618182 90.763636 9.309091 6.981818 25.6 4.654545 32.581818-4.654546s4.654545-25.6-4.654545-32.581818C726.109091 34.909091 621.381818 0 512 0 230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512c0-109.381818-34.909091-214.109091-100.072727-302.545455z" fill="#e6e6e6" p-id="1245"></path></svg> :
          <svg t="1647266103157" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1442" width="200" height="200"><path d="M437.527273 297.890909c-20.945455-11.636364-48.872727-11.636364-69.818182 0-20.945455 11.636364-34.909091 34.909091-34.909091 60.509091v307.2c0 25.6 13.963636 48.872727 34.909091 60.509091 11.636364 6.981818 23.272727 9.309091 34.909091 9.309091s23.272727-2.327273 34.909091-9.309091l267.636363-153.6c20.945455-11.636364 34.909091-34.909091 34.909091-60.509091s-13.963636-48.872727-34.909091-60.509091l-267.636363-153.6z m242.036363 235.054546l-267.636363 153.6c-11.636364 6.981818-20.945455 2.327273-23.272728 0-4.654545-2.327273-11.636364-6.981818-11.636363-20.945455V358.4c0-11.636364 6.981818-18.618182 11.636363-20.945455 2.327273-2.327273 6.981818-2.327273 11.636364-2.327272 2.327273 0 6.981818 0 11.636364 2.327272l267.636363 153.6c11.636364 6.981818 11.636364 16.290909 11.636364 20.945455s0 13.963636-11.636364 20.945455z" fill="#e6e6e6" p-id="1443"></path><path d="M923.927273 209.454545c-6.981818-9.309091-23.272727-11.636364-32.581818-4.654545-9.309091 6.981818-11.636364 23.272727-4.654546 32.581818C947.2 316.509091 977.454545 411.927273 977.454545 512c0 256-209.454545 465.454545-465.454545 465.454545S46.545455 768 46.545455 512 256 46.545455 512 46.545455c100.072727 0 195.490909 30.254545 274.618182 90.763636 9.309091 6.981818 25.6 4.654545 32.581818-4.654546s4.654545-25.6-4.654545-32.581818C726.109091 34.909091 621.381818 0 512 0 230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512c0-109.381818-34.909091-214.109091-100.072727-302.545455z" fill="#e6e6e6" p-id="1444"></path></svg>
          }
        </TextChunk>
        <TextChunk title="下一曲" isPreventDefault={true} fontSize={42} svgwidth={40}>
          <svg t="1647266154302" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7651" width="200" height="200"><path d="M496.457514 918.259724c-246.323105 0-446.716134-200.392006-446.716134-446.702831 0-246.323105 200.39303-446.716134 446.716134-446.716134 246.309802 0 446.701808 200.39303 446.701808 446.716134C943.160345 717.867718 742.768339 918.259724 496.457514 918.259724zM496.457514 79.850629c-215.984123 0-391.706263 175.721117-391.706263 391.706263 0 215.985146 175.721117 391.691937 391.706263 391.691937S888.150474 687.542038 888.150474 471.556892C888.150474 255.57277 712.44266 79.850629 496.457514 79.850629z" p-id="7652" fill="#e6e6e6"></path><path d="M828.560284 485.310128c-7.602142 0-13.752212-6.151094-13.752212-13.752212 0-143.125745-96.30744-269.409916-234.195903-307.108516-7.318686-2.001587-11.644201-9.562796-9.643638-16.894785 2.001587-7.333012 9.643638-11.56336 16.895809-9.642614 149.814074 40.961924 254.449179 178.151469 254.449179 333.646939C842.313519 479.159034 836.162426 485.310128 828.560284 485.310128z" p-id="7653" fill="#e6e6e6"></path><path d="M515.004939 153.703661c-0.254803 0-0.51063 0-0.765433-0.026606-5.89629-0.322341-11.819187-0.483001-17.781992-0.483001-7.587815 0-13.752212-6.151094-13.752212-13.752212s6.164397-13.752212 13.752212-13.752212c6.460132 0 12.893658 0.188288 19.286252 0.537236 7.587815 0.403183 13.403265 6.889921 12.986779 14.477736C528.327362 148.023288 522.25711 153.703661 515.004939 153.703661z" p-id="7654" fill="#e6e6e6"></path><path d="M568.068482 597.062328c-20.992103 0-32.072463-15.512299-32.072463-36.086893L535.996019 382.125047c0-20.561291 11.43033-36.07359 32.877805-36.07359 7.789407 0 13.189394 2.109034 20.063965 6.083555l143.676283 89.633437c12.893658 7.453762 19.891026 18.815531 19.891026 30.957059-0.014326 11.416004-7.17133 21.931498-19.151176 28.821419l-145.019885 89.284489C581.174987 594.954317 575.722812 597.062328 568.068482 597.062328zM568.873824 373.556904c-2.37714 0-5.372358 0.618077-5.372358 8.568143l0 178.850387c0 7.735172 1.772366 8.582469 4.567016 8.582469 2.834558 0 3.41068-0.832971 6.123464-2.40477l146.066727-89.284489c3.988848-2.296299 4.740978-4.324492 4.740978-5.157463 0-1.249457-2.228761-4.351098-7.399527-7.333012l-142.628418-89.633437C572.606845 374.389876 571.828109 373.556904 568.873824 373.556904z" p-id="7655" fill="#e6e6e6"></path><path d="M358.636588 597.062328c-19.527752 0-28.928866-15.176654-28.928866-36.086893L329.707722 382.125047c0-20.911262 9.549493-36.07359 29.277814-36.07359 7.184633 0 12.255115 2.109034 19.145036 6.083555l141.507898 89.687672c12.435217 7.184633 19.21769 18.305925 19.205411 30.258141 0 11.643178-7.359618 22.37459-19.662829 29.465079l-140.943033 89.190345C370.932636 594.954317 365.754706 597.062328 358.636588 597.062328zM358.986559 373.556904c-4.337795 0-1.772366 2.874467-1.772366 8.568143l0 178.850387c0 8.582469-0.107447 8.582469 1.423419 8.582469 1.598404 0 1.860371-0.416486 5.311982-2.40477l141.991921-89.190345c4.511757-2.618641 5.412266-4.91494 5.412266-5.895267 0-1.181919-2.042519-3.935636-6.809079-6.688329l-140.460032-89.687672C361.799628 374.389876 361.350396 373.556904 358.986559 373.556904z" p-id="7656" fill="#e6e6e6"></path></svg>
        </TextChunk>
      </div>
    </>
  },
  //播放进度条
  ProgressBar: (props) => {
    const context = React.useContext(Context);
    return <>
      <div className={context.music_control_class.play_box_progress_bar}>
         
      </div>
    </>
  },
  LoopState: (props) => {
    const context = React.useContext(Context);
    return <>
      <div className=''>

      </div>
    </>
  }
}
//播放器组件
function ReactAudioPlayer(props) {
  const context = React.useContext(Context)
  const player = useRef();
  useEffect(() => {
    context.get_player(player.current);
  },[])
  return <>
      <audio {...props} ref={player}>
      </audio>
        {context.music_unfold ? <>
          <MusicControl.ProgressBar />
          <MusicControl.LoopState />
          <MusicControl.PlayState /> 
        </>
          : 
          <>
            <MusicControl.PlayState />
            <MusicControl.ProgressBar />
            <MusicControl.LoopState />
        </>}
  </>
}
function MusicChunk(props) {
  const onUnfold = props.onUnfold ? props.onUnfold : null;
  const methods = React.useContext(Context);
  const search_tag = (e, key, limit = 30, offset = 1, type = 2) => {
    (async function () {
      const data = await axios(`http://rainsin.yicp.top/music?key=${e.target.textContent}&limit=${limit}&offset=${offset}&type=${type}`)
    })(methods, axios, limit, offset, type);
  }
  // useEffect(() => {
  //   let limit=20, offset=1, type=2,key='周杰伦'
  //   (async function () {
  //     const data = await axios(`http://rainsin.yicp.top/music?key=${key}&limit=${limit}&offset=${offset}&type=${type}`)
  //     setListData(data.data.data.musics)
  //   })(methods, axios,limit=20, offset=1, type=2,key);
  // },[])
  const isPlay = () => {
    methods.change_music_paly();
  }
  const isPause = () => {
    methods.change_music_paly();
  }
  useEffect(() => {
    (
      async function () {
        const color = await axios.get(`http://rainsin.yicp.top/getImg?url=${methods.music.album_img_url}`);
        methods.music.album_main_color = `rgb(${color.data.join()})`
      }
    )()
  }, []);
  useEffect(() => {
    console.log(methods.music.album_main_color);
  })
  return <>
    <div className={'music-chunk ' + methods.music_unfold_class.border_radius_init}>
      <div className='music-chunk-meck' style={{backgroundImage:'url('+ methods.music.album_img_url +')'}}></div>
      <div className={'music-chunk-content ' + methods.music_control_class.music} >
        <div className='music-chunk-content-unfold'>
        <TextChunk fontSize={24} svgwidth={24} onClick={onUnfold} isPreventDefault={true}>
            {methods.music_unfold ? <svg t="1647265752395" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4166" width="200" height="200"><path d="M912 48h-800c-35.296 0-64 28.704-64 64v800c0 35.296 28.704 64 64 64h800c35.296 0 64-28.704 64-64v-800c0-35.296-28.704-64-64-64z m-800 864v-800h800l0.064 800H112z" p-id="4167" fill="#e6e6e6"></path><path d="M368.896 192a32 32 0 0 0-32 32v105.888H224a32 32 0 0 0 0 64h144.896a32 32 0 0 0 32-32V224a32 32 0 0 0-32-32zM784.864 329.888H672V224a32 32 0 1 0-64 0v137.888a32 32 0 0 0 32 32h144.864a32 32 0 1 0 0-64zM368.896 640H224a32 32 0 1 0 0 64h112.896v105.92a32 32 0 1 0 64 0V672a32 32 0 0 0-32-32zM784.864 640H640a32 32 0 0 0-32 32v137.92a32 32 0 1 0 64 0V704h112.864a32 32 0 1 0 0-64z" p-id="4168" fill="#e6e6e6"></path></svg> :
            <svg t="1647264250312" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2203" width="200" height="200"><path d="M368.896 192H224a32 32 0 0 0-32 32v137.888a32 32 0 0 0 64 0V256h112.896a32 32 0 0 0 0-64zM784.864 192H640a32 32 0 1 0 0 64h112.864v105.888a32 32 0 1 0 64 0V224a32 32 0 0 0-32-32zM368.896 777.92H256V672a32 32 0 1 0-64 0v137.92a32 32 0 0 0 32 32h144.896a32 32 0 1 0 0-64zM784.864 640a32 32 0 0 0-32 32v105.92H640a32 32 0 1 0 0 64h144.864a32 32 0 0 0 32-32V672a32 32 0 0 0-32-32z" p-id="2204" fill="#e6e6e6"></path><path d="M912 48h-800c-35.296 0-64 28.704-64 64v800c0 35.296 28.704 64 64 64h800c35.296 0 64-28.704 64-64v-800c0-35.296-28.704-64-64-64z m-800 864v-800h800l0.064 800H112z" p-id="2205" fill="#e6e6e6"></path></svg>}
        </TextChunk>
        </div>
      <div className='music-chunk-tag'>
        {music_tag.map((item, index) => {
          return <TextChunk onClick={search_tag} key={index} isPreventDefault={true} fontSize={17} lineheight='_'><Tag color={item.color}>{item.name}</Tag></TextChunk>
        })}
        </div>
          <div className={'album-list-box ' + + methods.music_unfold_class.music_list_table}>
            <MusicList></MusicList>
          {methods.music_unfold ? <>
            <div className='music-album-box'>

            </div>
            </>
            :
            <></>}
        </div>
        <div className={'react-audio-player-box ' + methods.music_control_class.music_palyer}>
        <ReactAudioPlayer
        className='react-audio-player'
        src={'https://freetyst.nf.migu.cn/public%2FproductBe%2FproductB03%2F2019%2F10%2F0718%2F2010%E5%B9%B402%E6%9C%8823%E6%97%A5%E6%B5%B7%E8%9D%B6%E5%94%B1%E7%89%87%2F%E5%85%A8%E6%9B%B2%E8%AF%95%E5%90%AC%2FMp3_64_22_16%2F60058622750.mp3?Key=e4633b47217f7a7d&Tim=1646982862719&channelid=01&msisdn=d25e212158894859841ef2ff719add06'}
        autoPlay={false}
        onPlay={isPlay}
        onPause={isPause}
        header='反方向的钟'
      />
        </div> 
      </div>
      
      </div>
      
  </>
}

export default observer(MusicChunk);