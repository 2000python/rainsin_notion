/*
 * @LastEditors: 尉旭胜(Riansin)
 * @Author: 尉旭胜(Riansin)
 */
import React, { useEffect, useState,useContext,useMemo } from 'react';
import { Context } from '../..';
import {observer} from "mobx-react-lite";
import { Outlet} from 'react-router-dom';
import './nav.css';
import TextChunk from '../chunk/text-chunk';
import ProgressBar from '../chunk/scrollBar';
import MusicChunk,{ MusicControl } from '../chunk/music-chunk';
import { style } from '@mui/system';
import Input from '../input';
import Magnet from '../resoutool/magnet';
import ModelChunk from '../model';

/**
 * 导航栏 组件
 * @return {ReactComponent}
 */

function Nav(props) {
    const navData = useContext(Context);
    useEffect(() => {
    
    })
    const [musicmouse, setMusicMousenode] = useState(false);
    const [MusicClose, setMusicClose] = useState({
        meck_close: 'meck-close-box',
        content_close: 'content-close-box'
    });
    const isMusic_paly = () => {
        const audio = document.querySelector('audio');
        navData.change_nav_music_paly(audio);
    }

    const changeMagnet = () => {
        const body = document.body;
        return function () {
            navData.set_magnet_unfold(body);
        }
    }
    const change_nav_music_mouse = () => {
        setMusicMousenode((pre, newValue) => {
            newValue = !pre;
            return newValue;
        })
    }
    //打开音乐容器
    const change_music_box = () => {
        setMusicClose({
            meck_close: 'meck-open-box',
            content_close:'content-open-box'
        })
        document.body.style.overflow = 'hidden';
    }
    //关闭音乐容器
    const music_box_close = (e) => {
        setMusicClose({
            meck_close: 'meck-close-box',
            content_close:'content-close-box'
        })
        document.body.style.overflow = 'auto';
    }
    // const unfold = () => {
    //     if (!navData.music_unfold) {
    //         navData.set_music_unfold_class(unfold_class)
    //         navData.set_music_control_class(MusicControl.musicControlUnfoldClass)
    //         navData.change_music_unfold();
    //     } else {
    //         navData.set_music_unfold_class(shrink_class)
    //         navData.set_music_control_class(MusicControl.musicControlShrinkClass)
    //         navData.change_music_unfold();
    //     }
        
    // }
    return (
        <>
        
        <nav className='nav'>
        <ProgressBar />
        <div className='nav-center-box'>
            <div className='nav-crumbs'>
                <TextChunk Class='nav-patn-box' title='种子永远不死' onClick={changeMagnet()} content='' fontSize={20} svgwidth={22}  lineheight=' _'>
               <svg t="1647958707971" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3610" width="200" height="200"><path d="M410.097371 988.642743h-0.029257c-96.0512 0-186.616686-41.472-255.005257-109.845943l-3.847314-5.7344C7.636114 729.4976 7.636114 494.986971 151.171657 351.480686l227.913143-228.395886a29.4912 29.4912 0 0 1 20.6848-8.8064c7.753143 0 15.199086 2.9696 20.6848 8.455314l167.8336 167.789715a29.227886 29.227886 0 0 1 0 41.354971L393.493943 526.6432c-12.975543 12.975543-19.924114 30.646857-19.587657 49.810286a74.298514 74.298514 0 0 0 21.386971 50.863543 74.122971 74.122971 0 0 0 52.1216 21.386971c18.666057 0 35.913143-6.9632 48.552229-19.587657l194.779428-194.808686c10.971429-10.971429 30.398171-10.971429 41.3696 0l167.848229 167.848229a29.257143 29.257143 0 0 1 0 41.3696l-227.913143 231.687314c-70.685257 70.699886-163.722971 113.429943-261.953829 113.429943z m-10.313142-803.971657L192.555886 391.899429c-120.714971 120.7296-120.714971 317.147429 0 437.877028l3.847314 3.832686c57.373257 57.358629 133.237029 88.927086 213.679543 88.941714h0.014628c82.607543 0 160.943543-32.841143 220.598858-92.496457L837.924571 622.826057l-126.478628-126.478628-174.094629 174.138514c-23.683657 23.683657-55.632457 36.732343-89.921828 36.732343a132.944457 132.944457 0 0 1-93.505829-38.531657 131.437714 131.437714 0 0 1-38.531657-91.194515c-0.6144-35.196343 12.434286-67.949714 36.732343-92.233143L526.248229 311.149714l-126.464-126.478628z" fill="#515151" p-id="3611"></path><path d="M224.270629 818.863543a14.555429 14.555429 0 0 1-10.313143-4.256914l-3.057372-3.042743c-53.306514-53.306514-82.6368-124.123429-82.6368-199.460572s29.344914-146.154057 82.607543-199.416685l74.795886-74.810515a14.613943 14.613943 0 1 1 20.6848 20.6848l-74.795886 74.810515c-47.747657 47.747657-74.049829 111.221029-74.049828 178.731885s26.302171 130.998857 74.049828 178.746515l3.028114 3.013485a14.613943 14.613943 0 0 1-10.313142 25.000229zM367.338057 291.5328a14.613943 14.613943 0 0 1-10.3424-24.970971l33.704229-33.718858a14.613943 14.613943 0 1 1 20.6848 20.6848l-33.704229 33.718858a14.584686 14.584686 0 0 1-10.3424 4.286171zM639.531886 268.478171a29.140114 29.140114 0 0 1-20.6848-8.572342L451.013486 92.072229a29.257143 29.257143 0 1 1 41.3696-41.3696l167.8336 167.8336a29.257143 29.257143 0 0 1-20.6848 49.941942zM951.208229 580.154514a29.140114 29.140114 0 0 1-20.6848-8.572343L762.704457 403.7632a29.257143 29.257143 0 1 1 41.3696-41.3696l167.8336 167.8336a29.257143 29.257143 0 0 1-20.699428 49.927314z" fill="#515151" p-id="3612"></path></svg>
                </TextChunk>
                        <TextChunk Class='' dbClick={change_music_box} onClick={isMusic_paly} MouseOver={change_nav_music_mouse} MouseOut={change_nav_music_mouse} isPreventDefault={true} title='单击—播放/暂停  双击-具体页面' content='' fontSize={20} svgwidth={22} lineheight=' _'>
                            {navData.music_paly ? musicmouse ?
                                <svg t="1646902808958" className="nav-music-cont" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1583" width="200" height="200"><path d="M910.8 303.6c-5.4-10.5-16.3-17.8-28.9-17.8-17.8 0-32.2 14.4-32.2 32.1 0 6 1.7 11.7 4.6 16.5l-0.1 0.1c26.9 52.4 42.1 111.8 42.1 174.7 0 211.6-171.6 383.2-383.2 383.2S129.8 720.8 129.8 509.2 301.4 126.1 513 126.1c62.5 0 121.5 15 173.6 41.5l0.2-0.4c4.6 2.6 10 4.1 15.7 4.1 17.8 0 32.2-14.4 32.2-32.1 0-13.1-7.9-24.4-19.3-29.4C654.6 78.9 585.9 61.5 513 61.5 265.7 61.5 65.3 262 65.3 509.2S265.7 956.9 513 956.9s447.7-200.4 447.7-447.7c0-74.1-18-144-49.9-205.6z" fill="#515151" p-id="1584"></path><path d="M385.4 352.2V672c0 17.5 14.3 31.9 31.9 31.9 17.6 0 32-14.4 31.9-31.9V352.2c0-17.5-14.3-31.9-31.9-31.9-17.5 0-31.9 14.3-31.9 31.9zM578.9 352.2V672c0 17.5 14.3 31.9 31.9 31.9 17.5 0 31.9-14.4 31.9-31.9V352.2c0-17.5-14.3-31.9-31.9-31.9-17.5 0-31.9 14.3-31.9 31.9z" fill="#515151" p-id="1585"></path><path d="M772.7 217.7a32.2 32.1 0 1 0 64.4 0 32.2 32.1 0 1 0-64.4 0Z" fill="#515151" p-id="1586"></path></svg>
                                :
                                <svg t="1646896673563" className='nav-music-cont' viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14381" width="200" height="200"><path d="M512 972.8C258.048 972.8 51.2 765.952 51.2 512S258.048 51.2 512 51.2s460.8 206.848 460.8 460.8c0 17.408-13.312 30.72-30.72 30.72s-30.72-13.312-30.72-30.72c0-220.16-179.2-399.36-399.36-399.36S112.64 291.84 112.64 512s179.2 399.36 399.36 399.36c17.408 0 30.72 13.312 30.72 30.72s-13.312 30.72-30.72 30.72z" p-id="14382" fill="#515151"></path><path d="M512 972.8C258.048 972.8 51.2 765.952 51.2 512S258.048 51.2 512 51.2s460.8 206.848 460.8 460.8c0 83.968-22.528 164.864-65.536 236.544-9.216 14.336-27.648 19.456-41.984 10.24-14.336-9.216-19.456-27.648-10.24-41.984 36.864-61.44 56.32-133.12 56.32-204.8 0-220.16-179.2-399.36-399.36-399.36S112.64 291.84 112.64 512s179.2 399.36 399.36 399.36c91.136 0 177.152-29.696 247.808-87.04 6.144-5.12 13.312-11.264 19.456-16.384 5.12-4.096 9.216-9.216 14.336-13.312 12.288-12.288 31.744-12.288 43.008 0 12.288 12.288 12.288 31.744 0 43.008-5.12 5.12-10.24 10.24-16.384 15.36-7.168 6.144-14.336 13.312-22.528 19.456C716.8 937.984 617.472 972.8 512 972.8z" p-id="14383" fill="#515151"></path><path d="M752.64 352.256c-9.216 0-18.432-4.096-24.576-11.264-41.984-53.248-102.4-89.088-169.984-101.376-16.384-3.072-27.648-18.432-24.576-35.84 3.072-16.384 18.432-27.648 35.84-24.576 81.92 14.336 155.648 57.344 206.848 122.88 10.24 13.312 8.192 32.768-5.12 43.008-5.12 5.12-11.264 7.168-18.432 7.168zM381.952 795.648c-23.552 0-47.104-6.144-68.608-18.432-31.744-18.432-55.296-48.128-64.512-83.968-9.216-35.84-5.12-72.704 13.312-104.448 18.432-31.744 48.128-55.296 83.968-64.512l73.728-19.456c35.84-9.216 72.704-5.12 104.448 13.312 31.744 18.432 55.296 48.128 64.512 83.968 9.216 35.84 5.12 72.704-13.312 104.448-18.432 31.744-48.128 55.296-83.968 64.512l-73.728 19.456c-11.264 3.072-23.552 5.12-35.84 5.12z m73.728-234.496c-7.168 0-13.312 1.024-19.456 3.072L362.496 583.68c-19.456 5.12-35.84 18.432-46.08 35.84s-13.312 38.912-7.168 58.368c5.12 19.456 18.432 35.84 35.84 46.08s38.912 13.312 58.368 7.168l73.728-19.456C495.616 706.56 512 693.248 522.24 675.84c10.24-17.408 13.312-38.912 7.168-58.368-5.12-19.456-18.432-35.84-35.84-46.08-11.264-7.168-24.576-10.24-37.888-10.24z" p-id="14384" fill="#515151"></path><path d="M563.2 665.6c-17.408 0-30.72-13.312-30.72-30.72V215.04c0-17.408 13.312-30.72 30.72-30.72s30.72 13.312 30.72 30.72v419.84c0 17.408-13.312 30.72-30.72 30.72z" p-id="14385" fill="#515151"></path></svg>
                                :
                                musicmouse ?
                                <svg t="1646896787599" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15618" width="200" height="200"><path d="M772.7 217.7a32.2 32.1 0 1 0 64.4 0 32.2 32.1 0 1 0-64.4 0Z" fill="#515151" p-id="15619"></path><path d="M415.8 679.9c5.9 0 11.5-1.6 16.2-4.5l231.1-134.6c10.9-5.2 18.5-16.3 18.5-29.2 0-11.9-6.4-22.3-16-27.8L439.7 352.2c-5.8-6.7-14.4-10.9-23.9-10.9-17.6 0-31.8 14.4-31.8 32.1 0 0.6 0 1.2 0.1 1.8l-0.4 0.2 0.5 269c-0.1 1.1-0.2 2.2-0.2 3.4 0 17.7 14.3 32.1 31.8 32.1z" fill="#515151" p-id="15620"></path><path d="M909.8 306.6c-5.4-10.5-16.3-17.8-28.9-17.8-17.8 0-32.2 14.4-32.2 32.1 0 6 1.7 11.7 4.6 16.5l-0.1 0.1c26.9 52.4 42.1 111.8 42.1 174.7 0 211.6-171.6 383.2-383.2 383.2S128.8 723.8 128.8 512.2 300.4 129.1 512 129.1c62.5 0 121.5 15 173.6 41.5l0.2-0.4c4.6 2.6 10 4.1 15.7 4.1 17.8 0 32.2-14.4 32.2-32.1 0-13.1-7.9-24.4-19.3-29.4C653.6 81.9 584.9 64.5 512 64.5 264.7 64.5 64.3 265 64.3 512.2S264.7 959.9 512 959.9s447.7-200.4 447.7-447.7c0-74.1-18-144-49.9-205.6z" fill="#515151" p-id="15621"></path></svg>
                                :
                                <svg t="1646896673563" className='' viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14381" width="200" height="200"><path d="M512 972.8C258.048 972.8 51.2 765.952 51.2 512S258.048 51.2 512 51.2s460.8 206.848 460.8 460.8c0 17.408-13.312 30.72-30.72 30.72s-30.72-13.312-30.72-30.72c0-220.16-179.2-399.36-399.36-399.36S112.64 291.84 112.64 512s179.2 399.36 399.36 399.36c17.408 0 30.72 13.312 30.72 30.72s-13.312 30.72-30.72 30.72z" p-id="14382" fill="#515151"></path><path d="M512 972.8C258.048 972.8 51.2 765.952 51.2 512S258.048 51.2 512 51.2s460.8 206.848 460.8 460.8c0 83.968-22.528 164.864-65.536 236.544-9.216 14.336-27.648 19.456-41.984 10.24-14.336-9.216-19.456-27.648-10.24-41.984 36.864-61.44 56.32-133.12 56.32-204.8 0-220.16-179.2-399.36-399.36-399.36S112.64 291.84 112.64 512s179.2 399.36 399.36 399.36c91.136 0 177.152-29.696 247.808-87.04 6.144-5.12 13.312-11.264 19.456-16.384 5.12-4.096 9.216-9.216 14.336-13.312 12.288-12.288 31.744-12.288 43.008 0 12.288 12.288 12.288 31.744 0 43.008-5.12 5.12-10.24 10.24-16.384 15.36-7.168 6.144-14.336 13.312-22.528 19.456C716.8 937.984 617.472 972.8 512 972.8z" p-id="14383" fill="#515151"></path><path d="M752.64 352.256c-9.216 0-18.432-4.096-24.576-11.264-41.984-53.248-102.4-89.088-169.984-101.376-16.384-3.072-27.648-18.432-24.576-35.84 3.072-16.384 18.432-27.648 35.84-24.576 81.92 14.336 155.648 57.344 206.848 122.88 10.24 13.312 8.192 32.768-5.12 43.008-5.12 5.12-11.264 7.168-18.432 7.168zM381.952 795.648c-23.552 0-47.104-6.144-68.608-18.432-31.744-18.432-55.296-48.128-64.512-83.968-9.216-35.84-5.12-72.704 13.312-104.448 18.432-31.744 48.128-55.296 83.968-64.512l73.728-19.456c35.84-9.216 72.704-5.12 104.448 13.312 31.744 18.432 55.296 48.128 64.512 83.968 9.216 35.84 5.12 72.704-13.312 104.448-18.432 31.744-48.128 55.296-83.968 64.512l-73.728 19.456c-11.264 3.072-23.552 5.12-35.84 5.12z m73.728-234.496c-7.168 0-13.312 1.024-19.456 3.072L362.496 583.68c-19.456 5.12-35.84 18.432-46.08 35.84s-13.312 38.912-7.168 58.368c5.12 19.456 18.432 35.84 35.84 46.08s38.912 13.312 58.368 7.168l73.728-19.456C495.616 706.56 512 693.248 522.24 675.84c10.24-17.408 13.312-38.912 7.168-58.368-5.12-19.456-18.432-35.84-35.84-46.08-11.264-7.168-24.576-10.24-37.888-10.24z" p-id="14384" fill="#515151"></path><path d="M563.2 665.6c-17.408 0-30.72-13.312-30.72-30.72V215.04c0-17.408 13.312-30.72 30.72-30.72s30.72 13.312 30.72 30.72v419.84c0 17.408-13.312 30.72-30.72 30.72z" p-id="14385" fill="#515151"></path></svg>
                            }
                        </TextChunk>
                <TextChunk Class=''  content={'解忧杂货店'} url={'/'} fontSize={15}></TextChunk>
            
        </div>
        <div className='nav-menu'>

            <TextChunk Class='nav-center' content='分享' url='/share' fontSize={14}></TextChunk>


            <TextChunk Class='nav-center' content='简历' url='/resume' fontSize={14}></TextChunk>


            <TextChunk Class='nav-center' content='➠' url='/share' fontSize={18}></TextChunk>


            <TextChunk Class='nav-center' content='➠' url='/share' fontSize={18}></TextChunk>

        </div>
        </div>
        <div className={`music-box ${MusicClose.meck_close} ${navData.music_unfold_class.border_radius_init}`} onClick={music_box_close} >
            {/* <div className={`music-box-content ${MusicClose.content_close}`}>
                <MusicChunk></MusicChunk>
            </div> */}
        </div>
        <div className={`music-box-content ${MusicClose.content_close} ${navData.music_unfold_class.content_unfold}`} style={{backgroundColor:navData.music.album_main_color}}>
            <MusicChunk ></MusicChunk>
        </div>
        <ModelChunk unfold={navData.magnet.unfold} change={changeMagnet()}>
            <Magnet></Magnet>      
        </ModelChunk>
        </nav>
        <Outlet></Outlet>
        </>);
}

export default observer(Nav);
